# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Архитектура проекта Web-Larek
Проект Web-Larek построен по паттерну MVP и состоит из следующих слоев:

- Слой представления: Отвечает за отображение данных на странице.
- Слой данных: Управляет хранением и обновлением данных.
- Презентер: Связывает слои представления и данных.

## Основной код

## Класс API
Обрабатывает основные запросы. Принимает базовый URL сервера и опциональные заголовки. Основные методы:

-get: Выполняет GET-запрос к указанному эндпоинту.
-post: Отправляет объект JSON на заданный эндпоинт. Может работать с разными HTTP-методами.

## Класс EventEmitter
Управляет событиями в приложении. Используется в презентерах для обработки и генерации событий. Основные методы:

- on: Подписка на событие.
- emit: Инициализация события.
- off: Отписка от события.

## Класс Component<T>
Абстрактный класс для компонентов пользовательского интерфейса (используется классами представления). Основные свойства и методы:

- toggleClass: Переключает класс на элементе.
- setText: Устанавливает текстовое содержимое.
- setDisabled: Включает/выключает элемент.
- setImage: Устанавливает изображение с альтернативным текстом.
render: Отвечает за рендер переданных элементов.

## Класс Model<T>
Абстрактный класс для моделей данных. Принимает начальные данные и события для уведомления об изменениях модели. Основной метод:

- emitChanges: Уведомляет слушателей об изменениях модели.

## Класс Form<T>
Для создания форм, наследуется от Component. Обрабатывает ввод и проверку данных.

- onInputChange: Обработчик для изменения ввода.
- valid: Устанавливает проверку формы.
- errors: Устанавливает сообщения об ошибках.
- render: Рендерит элементы формы.

## Модель приложения

## Класс AppState
Отражает полную модель приложения, наследуется от Model. 

Основные свойства:
- catalog: Список товаров.
- basket: Список товаров в корзине.
- order: Детали для оформления заказа.
- preview: Просмотр товара по ID.

Основные методы:
- addBasket / removeBasket: Добавляет/удаляет товары из корзины.
- clearBasket / updateBasket: Очищает или обновляет содержимое корзины.
- getTotal: Считает общую сумму.
- validateOrder / validateContact: Проверяет данные заказа и контактов.
- setPreview: Отображает предпросмотр товара.

## Список событий
Ключевые события приложения:

- 'items:changed': Изменение товара.
- 'basket:add': Добавление товара в корзину.
- 'order:open': Открытие формы заказа.
- 'formErrors:change': Изменение ошибок валидации формы.

## Сервисный класс - WebLarekApi

## Класс WebLarekApi
Обеспечивает взаимодействие с бэкендом, принимает базовый URL и опции. Основные методы:

- getProductList: Получает список продуктов с сервера.
- order: Отправляет данные формы заказа.

## Классы представления (наследники Component<T>)

## Класс Card
Отображает и управляет карточками товаров. Основные свойства и методы:

- id: Уникальный идентификатор карточки.
- title / description / category: Детали товара.
- image: Изображение товара.
- disableButton: Проверка доступности товара.

## Класс Basket
Управляет корзиной. Основные свойства:

- _list: Коллекция товаров в корзине.
- _price: Отображение общей цены.
- _button: Кнопка оформления заказа.

## Класс Order
Управляет формой заказа с адресом и способами оплаты.

- adress: Устанавливает адрес.
- payment: Устанавливает способ оплаты (онлайн/при получении).

## Класс Contact
Обрабатывает ввод данных телефона и электронной почты.

## Класс Page
Представляет страницу с каталогом и счетчиком товаров.

- counter: Счетчик товаров.
- catalog: Размещает товары на странице.

## Класс Success
Отображает сообщение об успешной покупке и кнопку закрытия.